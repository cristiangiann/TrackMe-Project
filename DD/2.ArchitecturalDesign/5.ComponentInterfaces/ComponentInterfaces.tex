\documentclass[../../DD.tex]{subfiles}


\begin{document}
\section{Component Interfaces\label{sect2.5}}

The following is a representation of the component interfaces that are offered by the system to be. The interfaces are both of external and of internal components so as to provide a clearer explanation of the main methods they offer.\\
\indent The naming convention adopted is of the form "Component\textunderscore InterfaceName", where "Component" is the component it is offered by and "InterfaceName" is the name of the interface. The first interface - "dataInterface" - is used and offered by many components and it is needed to send and receive data. When the component name is "service", it means that the interface must be offered by all the \ic{Third party Services}.\\
\indent The majority of the following interfaces must include a way to check that who is asking to access any kind of data is authorized. For example, the interface through which an user can retrieve the services to which is subscribed to must check that who is sending the request is really the user who is declaring to be. Interfaces that have this need are marked in the following list with a comment "requires auth". From an implementation point of view, a possible solution could be providing always the answer encrypted with an RSA algorithm: the encryption is done with a key and the user, to read data, must use the other key that was generated in his mobile phone during the sign up process.

\begin{lstlisting}

//Generic Interfaces

public interface dataInterface{
	boolean receiveData(Data data);  // requires auth
}

public interface service_newDataInterface{
	boolean receiveData(Data data);  // requires auth
}

public interface service_serviceInterface{
	boolean executeCommand(String command);
	//command varies from Service to Service (e.g. it may be an API call) 
}


//Data4Help Interfaces
public interface d4h_getNotificationsInterface{
	List<String> getNotifications(String username);
}

public interface d4h_addNotificationsInterface{
	boolean addNotifications (List<String> notifications, String username)
}

public interface d4h_registerAndLoginInterface{
	boolean isUsernameValid(String username);
	boolean isPasswordValid(String password);
	boolean login(String username, String password);
	boolean userExists(String username);
	boolean signUp(String fullname, Date dateOfBirth, boolean gender, String ssn, String email, String password);
	//gender: 1 for Male, 0 for Female
}

public interface d4h_servicesInterface{
	List<Service> lookupServices(String namelike);
	List<Service> getAllServices();
	List<Service> getUserServices(String username);  // requires auth
	Service getServiceByID(int serviceID);
	boolean addServiceToUserServices(int serviceID, String username);  // requires auth
	boolean deleteServiceFromUserServices(int serviceID, String username);  // requires auth
}

public interface d4h_requestDataInterface{
	Data getUserData(UserDataRequest request); // requires auth
	List<AnonimousData> getGroupData(GroupDataRequest request); // requires auth
}


//AutomatedSOS Interfaces

public interface asos_automatedSOSCommandsInterface{
	boolean reactivateMonitoring(String username); // requires auth
	boolean subscribeUser(User user);
	boolean removeUser(User user);
}

public interface asos_callerInterface{
	boolean call(String username, Data userData);
}


//Track4Run Interfaces

public interface t4r_automatedSOSCommandsInterface{
	boolean enroll(User user, Run run); // requires auth
	boolean removeUser(User user, Run run);
	List<Run> getAvailableRuns();
}

public interface t4r_spectatorsInterface{
	Run getRunByID(String ID);
	List<Run> getAllRuns();
}

public interface t4r_runManagementInterface{
	boolean createRun(String name, Date date, DateTime time, Position start, int maxNumberOfParticipants, Date enrollmentClosureDate);
	boolean setPath(List<Position> path);
}

public interface t4r_registerAndLoginInterface{
	boolean isUsernameValid(String username);
	boolean isPasswordValid(String password);
	boolean login(String username, String password);
	boolean organizerExists(String username);
	boolean signUp(String fullname, Date dateOfBirth, String email, String password);
}

public interface db_queriesInterface{
	getUserByUsername(String username);
	insertUser(String fullname, Date dateOfBirth, boolean gender, String ssn, String email, String password);
	deleteUser(String username);
	insertData(Data data);
	getUserData(String username);
	deleteAllUserData(String username);
	insertServiceForUserServices(String serviceID, String username);
	deleteServiceFromUserServices(String serviceID, String username);
	getAllUserServices(String username);
	getAllServices();
	insertNotification(String notification);
	//TODO: capire con prof. DiNitto se fare tutta la lista come qui o fare solo doQuery(String query)
}
\end{lstlisting}

\end{document}
